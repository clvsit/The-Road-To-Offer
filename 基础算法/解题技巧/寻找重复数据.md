# 题目描述
给定一个包含 n + 1 个整数的数组 nums，其数字都在 1 到 n 之间（包括 1 和 n），至少存在一个重复的整数，找出这个重复的数。

【示例 1】：
```
输入: [1,3,4,2,2]
输出: 2
```

【示例 2】：
```
输入: [3,1,3,4,2]
输出: 3
```

# 解题方法
- 排序法
- 哈希表存储

【特殊条件】：只有一个重复数据。
- 异或法
- 等差序列求和法
- 映射法

## 排序法
对数组进行排序，然后比较相邻元素，如果相邻元素相等，则当前元素是重复元素。
```python
repeat_set = set()
for i in range(1, len(nums)):
    if nums[i - 1] == nums[i]:
        repeat_set.add(nums[i)
```

【执行效率】;
- 时间复杂度：O(n log n)；
- 空间复杂度：O(1)。

## 哈希表存储
在遍历数组时将元素存储在哈希表中，如果当前元素已经在哈希表中，那么元素即为重复元素。
```python
num_set = set()
repeat_list = []

for num in nums:
    if num not in num_set:
        num_set.add(num)
    else:
        repeat_list.append(num)
```

【执行效率】：
- 时间复杂度：O(n)；
- 空间复杂度：O(n)。

## 位运算法
一个数和本身做异或运算结果为 0，和 0 做异或运算结果为本身。并且，异或运算满足交换律和结合律，即：
```
2 ^ 3 ^ 2 = 3 ^ (2 ^ 2) = 3 ^ 0 = 3
```

那么如何在该题中做异或操作呢？我们可以借助数组的下标，以示例 1 为例，[1, 3, 4, 2, 2] 的下标为 [0, 1, 2, 3, 4]。先把下标 0 去除，使得每个元素和自己相等的下标相对应。

根据异或运算的性质，[1, 2, 3, 4] 与各自对应的下标异或后结果为 0，余下的元素即为重复的元素。
```python
result = nums[0]
for index in range(1, len(nums)):
    result ^= (nums[index] ^ index)
```

【执行效率】：
- 时间复杂度：O(n)；
- 空间复杂度：O(1)。

## 等差序列求和法
我们可以把包含 1、...、n 的数组看作是一个等差序列，借助等差序列求和公式：
```math
sum(nums) = \frac{1 + n}{(n - 1 + 1) / 2}
```

只需要 sum(nums) - sum(1..n) 即可求出重复的元素。需要注意的是，当 n 较大时，两个较大的数相乘有可能会发生整型溢出。因此，我们可以直接让 nums 和 1..n 的每个元素相减，然后累加（而非直接累加后相减）。
```python
repeat_num = nums[0]
for i in range(1, n + 1):
    repeat_num += nums[i] - i
```

## 映射法
以示例 1 为例 [1, 3, 4, 2, 2]，其下标为 [0, 1, 2, 3, 4]。我们让数组中的每个元素找到对应的下标，并打上标记。

如何打上标记呢？数组中的第一个元素为 1，那么我们就把下标 1 - 1 = 0 位置处的元素修改为负数，即变为 [-1, 3, 4, 2, 2]，标志着 1 已经有对应的元素了。依次类推，抵达第一个 2 时，此时数组为 [-1, 3, -4, -2, 2]，将下标 1 的元素修改为负数，即 [-1, -3, -4, -2, 2]。最后一个元素 2 时，因为下标 1 的元素已经为负数了（已经被标记了），那么当前元素 2 即为重复元素。
```python
for index, num in enumerate(nums):            
    if nums[abs(num) - 1] < 0:
        return abs(num)
    else:
        nums[abs(num) - 1] = -nums[abs(num) - 1]
```

代码思想：
- 先找到对应的下标 `abs(num) - 1`；
- 如果下标位置的元素为负数，则返回当前元素 abs(num)；
- 如果下标位置的元素不为负数，则修改为负数，标记已被匹配。

【执行效率】：
- 时间复杂度：O(n)；
- 空间复杂度：O(1)。

# 参考
- 如何同时寻找缺失和重复的元素：https://labuladong.gitbook.io/algo/gao-pin-mian-shi-xi-lie/que-shi-he-zhong-fu-de-yuan-su